# 服务容器

一个web应用需要依赖各种各样的服务来驱动它的运行，譬如用于转发请求的router服务，用于访问数据库的db服务，用于记录日志的log服务等等。而且，这些服务与服务之间也可能存在依赖关系，譬如说router服务可能需要依赖config服务来读取预先配置的路由信息，或者需要依赖缓存
服务来读取缓存中的路由信息。在只有少量服务的系统中，我们可以一步一步地将这些服务初始化，我们也能清楚知道服务之间的依赖关系，所以也知道哪些服务该在哪些服务之前初始化。

```php
$config = new Config;
$db = new Database;
$router = new Router($config);
```

然而，一旦服务的数量开始增加，服务与服务之间的依赖就会变得错综复杂，这时，如果需要再往系统中添加服务的话，那么就需要先捋清楚各种依赖关系，确保服务在初始化之前，它所依赖的服务都已经初始化了。除了复杂的依赖关系以外，如果系统在每一次请求都初始化所有服务，而不管这些服务在这次请求中有没有用到，那么显然就会增加请求响应的时间。

Laravel的服务容器就能很好地解决这些问题，服务容器将系统所有的服务集中管理，服务可以往容器中注册一个服务解析函数（在服务容器中称为绑定），只有真正需要使用到该服务以后，容器才会调用服务解析函数来初始化服务，我们在服务解析函数中还能访问容器中的其他服务，这样，我们在初始化服务的时候就不需要关心它的依赖到底初始化了没有，如果没有，那么容器也会为我们初始化。

总的来说，服务容器主要就两个功能，一个是服务绑定，另外一个就是服务解析。