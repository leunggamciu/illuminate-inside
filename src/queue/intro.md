# 任务队列

针对一些耗时的任务，例如发送邮件，报表导出等，不必在同一个请求周期内完成的任务，我们可以把它们放到任务队列中
由队列的worker进程来负责处理。

整体而言，任务队列中有三种角色

* 生产者
* 队列
* 消费者

生产者负责将具体的任务，它可能是一个任务类的实例或者名称，推入到任务队列中，消费者，也就是worker进程负责从
队列中取出任务，然后执行。

这里面重点要关注几点

1. 任务消息的序列化，遇上不可序列化的怎么办
2. 如何保证消息不被重复消费
3. 消费者端如何平滑重启
